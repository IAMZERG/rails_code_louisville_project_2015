<p id="notice"><%= notice %></p>

<h1><%= @decklist.name %></h1>

<h3><%= @decklist.description %></h3>

<% @decklist.cards.each do |card| %>
  <div><%= card.quantity %> <%= card.name %></div>
<% end %>
<div>Total: <strong><%= @decklist.total %></strong></div>
<% @decklist.changes.each do |c| %>
  <h3>Version Number <%= c[1].last.created_at %></h3>
  <% c[1].each do |v| %>
    <p><%= v.inspect %></p>
    <% if v.event == "create" %>
      <p>+<%= v.prev_qty %> <%= v.prev_name %></p>
    <% end %>
    <% if v.event == "destroy" %>
      <p>-<%= v.prev_qty %> <%= v.prev_name %></p>
    <% end %>
    <% if v.event == "update" %>
      <% if (not v.changeset[:name]) &&  (v.changeset[:quantity]) %>
        <%= v.changeset[:quantity][1]-v.changeset[:quantity][0] %>
         <%= v[:prev_name] %>
       <% end %>
       <% if (not v.changeset[:quantity]) &&  (v.changeset[:name]) %>
         <p>+<%= v.prev_qty %> <%= v.changeset[:name].at(1) %>
         <p>-<%= v.prev_qty %> <%= v.changeset[:name].at(0) %>
       <% end %>
    <% end %>
  <% end %>
<% end %>


<hr>
<%= button_to 'Edit', edit_decklist_path(@decklist), :method => "get", :class => "btn btn-success" %>
